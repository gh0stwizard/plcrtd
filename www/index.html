<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The plcrtd project: OpenSSL Certificate Manager">
  <meta name="keywords" content="perl, knockout, openssl, ca, pkcs, generator, online">
  <meta name="author" content="gh0stwizard">
  <meta charset="utf-8">
  <title>plcrtd &part; OpenSSL Certificate Manager &forall;</title>
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/css/plcrtd.css" type="text/css">
  <script type="text/javascript" src="/js/knockout-3.3.0.js"></script>
  <script type="text/javascript" src="/js/zepto.min.js"></script>
  <script type="text/javascript" src="/js/signals.min.js"></script>
  <script type="text/javascript" src="/js/crossroads.min.js"></script>
  <script type="text/javascript" src="/js/hasher.min.js"></script>
  <script type="text/javascript" src="/js/plcrtd.js"></script>
</head>
<body>
<div class="content">
  <!-- Header :: buttons & loading animation //-->
  <div class="header">
      <button class="btn" data-bind="click: About">About</button>
      <button class="btn" data-bind="click: Configure">Configure</button>
      <button class="btn" data-bind="click: PrivateKeys">Private keys</button>
      <button class="btn" data-bind="click: Requests">Requests</button>
      <button class="btn" data-bind="click: Certificates">Certificates</button>
      <button class="btn" data-bind="click: Revoked">Revoked</button>
      <!-- http://spiffygif.com //-->
      <img src="/img/spiffygif.gif" alt="Loading"
           data-bind="visible: onAJAX()" />
  </div>

  <!-- Error message box //-->
  <div class="errorBox" data-bind="visible: errorMessage()">
    <p><span data-bind="text: errorMessage"></span></p>
    <pre><span data-bind="text: errorDescription"></span></pre>
  </div>

  <!-- About page //-->
  <div class="Page" data-bind="visible: onAbout()">
    <h1>The plcrtd project: OpenSSL Certificate Manager</h1>
    <h2>Description</h2>
    <p>This is an online web certificate manager implemented
       as described in 
       <a title="Mini tutorial for configuring client-side SSL certificates."
          href="https://gist.github.com/mtigas/952344" >howto</a>
          written by 
       <a href="https://gist.github.com/mtigas"
          title="About user mtigas on GitHub">mtigas</a>.
    </p>
    <h2>Goals</h2>
    <ul>
      <li>Provide a service to managing OpenSSL certificates.</li>
      <li>An integration with the
        <a href="http://www.nginx.org" title="nginx website">nginx</a>
        project.</li>
      <li>An interface to send a client certificate via email.</li>
    </ul>
    <h2>Development</h2>
    <p>This is an open source project. Please, checkout sources
      <a href="https://github.com/gh0stwizard/plcrtd"
         title="plcrtd on GitHub">here</a>.</p>
  </div>
  
  <!-- Configuration Page //-->
  <div class="Page" data-bind="visible: onConfigure()">
    <h1>Configuration</h1>
    <h2>Databases</h2>
    <button class="btn" data-bind="click: btnCreateDB">Create DB</button>
    <button class="btn" data-bind="click: btnWipeDBs">Wipe DBs</button>
    <div class="embedView" data-bind="visible: onCreateDB()">
      <form id="dbForm" data-bind="submit: CreateDB">
      <table id="hTable">
        <colgroup><col width="10%"></col></colgroup>
        <tbody data-bind="with: DB">
          <tr>
            <th>Name</th>
            <td class="editable"><input data-bind="value: name"/></td>
          </tr>
          <tr>
            <th>Description</th>
            <td class="editable"><input data-bind="value: description" /></td>
          </tr>
          <tr>
            <td class="button">&nbsp;</td>
            <td class="button">
              <button class="btn" type="submit">Submit</button>
              <button class="btn" data-bind="click: $root.btnCreateDB">Cancel</button>
            </td>
          </tr>
        </tbody>
      </table>
      </form>
    </div>
    <div class="embedView" data-bind="visible: onWipeDBs()">
      <h3>Attention!</h3>
      <p>By pressing submit button you are accept to wipe 
         all databases from the server.</p>
      <button class="btn" data-bind="click: WipeDBs">Submit</button>
      <button class="btn" data-bind="click: btnWipeDBs">Cancel</button>
    </div>
    <div class="embedView" data-bind="visible: onDBTable()">
      <table id="Table">
        <colgroup><col width="15%"><col width="80%"><col><col><col></colgroup>
        <thead data-bind="visible: DBList().length > 0">
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th colspan="3">&nbsp;</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: DBList">
          <tr>
            <td data-bind="text: name()"></td>
            <td data-bind="click: edit">
            	<span data-bind="visible: !editing(), text: description()"></span>
            	<input class="wide"
            	  data-bind="visible: editing, value: description(), hasFocus: editing" />
            </td>
            <td><a href="#" data-bind="click: $root.ActivateDB, visible: ! isActive()" 
                   title="Activate">Activate</a></td>
            <td><a href="#" data-bind="click: $root.UpdateDB" title="Update">Update</a></td>
            <td><a href="#" data-bind="click: $root.RemoveDB" title="Remove">Remove</a></td>
          </tr>
        </tbody>
      </table>
    </div>
    <h2 data-bind="visible: DBsetup">Settings</h2>
    <div class="embedView" data-bind="visible: DBsetup">
      <form id="setupForm" data-bind="submit: SetupDB">
      <table id="hTable">
        <colgroup><col width="15%"></col></colgroup>
        <tbody data-bind="with: DBsetup">
          <tr>
            <th>Database</th>
            <td data-bind="text: dbname"></td>
          </tr>
          <!--
          <tr>
            <th>CA path</th>
            <td class="editable"><input data-bind="value: capath"/></td>
          </tr>
          //-->
          <tr>
            <td class="button">&nbsp;</td>
            <td class="button"><button class="btn" type="submit">Submit</button></td>
          </tr>
        </tbody>
      </table>
      </form>
    </div>    
  </div>
  
  <!-- Private Keys Page //-->
  <div class="Page" data-bind="visible: onPrivateKeys()">
    <h1>Private keys</h1>
    <button class="btn" data-bind="click: btnCreatePK">Create PK</button>
    <button class="btn" data-bind="click: btnWipePKs">Wipe PKs</button>
    <div class="embedView" data-bind="visible: onCreatePK()">
      <form id="pkForm" data-bind="submit: CreatePK">
      <table id="hTable">
        <colgroup><col width="10%"><col></colgroup>
        <tbody data-bind="with: PK">
          <tr>
            <th>Name</th>
            <td class="editable"><input data-bind="value: name"/></td>
          </tr>
          <tr>
            <th>Type</th>
            <td class="editable">
              <select data-bind="options: pkOptions, value: type"></select>
            </td>
          </tr>
          <tr>
            <th>Size</th>
            <td class="editable">
              <select data-bind="options: sizeOptions, value: size"></select>
            </td>
          </tr>
          <tr>
            <td class="button">&nbsp;</td>
            <td class="button">
              <button class="btn" type="submit">Submit</button>
              <button class="btn" data-bind="click: $root.btnCreatePK">Cancel</button>
            </td>
          </tr>
        </tbody>
      </table>
      </form>
    </div>
    <div class="embedView" data-bind="visible: onWipePKs()">
      <h3>Attention!</h3>
      <p>By pressing submit button you are accept to wipe 
         all private keys from the server.</p>
      <button class="btn" data-bind="click: WipePKs">Submit</button>
      <button class="btn" data-bind="click: btnWipePKs">Cancel</button>
    </div>
    <div class="embedView" data-bind="visible: onPKTable()">
      <table id="Table">
        <colgroup><col width="70%"><col><col></colgroup>
        <thead data-bind="visible: PKList().length > 0">
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Size</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: PKList">
          <tr>
            <td data-bind="text: name()"></td>
            <td data-bind="text: type()"></td>
            <td data-bind="text: size()"></td>
            <td><a href="#" data-bind="click: $root.RemovePK" title="Remove">Remove</a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Requests Page //-->
  <div class="Page" data-bind="visible: onRequests()">
    <h1>Certificate signing requests</h1>
    <button class="btn" data-bind="click: btnCreateRQ">Create CSR</button>
    <button class="btn" data-bind="click: btnWipeRQs">Wipe CSRs</button>
    <div class="embedView" data-bind="visible: onCreateRQ()">
      <form id="csrForm" data-bind="submit: CreateRQ">
      <table id="hTable">
        <colgroup><col width="10%"><col></colgroup>
        <tbody data-bind="with: RQ">
          <tr>
            <th>Name</th>
            <td class="editable"><input data-bind="value: name"/></td>
          </tr>
          <tr>
            <td class="button">&nbsp;</td>
            <td class="button">
              <button class="btn" type="submit">Submit</button>
              <button class="btn" data-bind="click: $root.btnCreateRQ">Cancel</button>
            </td>
          </tr>
        </tbody>
      </table>
      </form>
    </div>
    <div class="embedView" data-bind="visible: onWipeRQs()">
      <h3>Attention!</h3>
      <p>By pressing submit button you are accept to wipe 
         all certificate signing requests from the server.</p>
      <button class="btn" data-bind="click: WipeRQs">Submit</button>
      <button class="btn" data-bind="click: btnWipeRQs">Cancel</button>
    </div>
    <div class="embedView" data-bind="visible: onRQTable()">
      <table id="Table">
        <colgroup><col width="70%"></colgroup>
        <thead data-bind="visible: RQList().length > 0">
          <tr>
            <th>Name</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: RQList">
          <tr>
            <td data-bind="text: name()"></td>
            <td><a href="#" data-bind="click: $root.RemoveRQ" title="Remove">Remove</a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Certificates Page //-->
  <div class="Page" data-bind="visible: onCertificates()">
    <h1>Certificates</h1>
  </div>

  <!-- Revoked Page //-->
  <div class="Page" data-bind="visible: onRevoked()">
    <h1>Revocation lists</h1>
  </div>

  <div class="footer"></div>
</div>
</body>
</html>
